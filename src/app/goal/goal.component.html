<table mat-table [dataSource]="dataSource" *ngIf="!currentGoal" multiTemplateDataRows class="mat-elevation-z8">

  <ng-container matColumnDef="expandedGoal">
    <td mat-cell *matCellDef="let goal" [attr.colspan]="displayedColumns.length">
      <div class="example-element-detail" [@detailExpand]="goal == expandedGoal ? 'expanded' : 'collapsed'">
        <div>
          <div> {{goal.description}} </div>
          <div> {{goal.startDate}} </div>
          <div> {{goal.targetDate}} </div>
          <div> {{goal.currentSavings}} </div>
          <div> {{goal.targetSavings}} </div>

        </div>
        <div class="example-element-description">
          {{goal.description}}
          <span class="example-element-description-attribution"> -- Wikipedia </span>
        </div>
      </div>
    </td>
  </ng-container>

  <ng-container matColumnDef="goalid">
    <th mat-header-cell *matHeaderCellDef> GoalID </th>
    <td mat-cell *matCellDef="let goal"> {{goal.goalId}} </td>
  </ng-container>

  <!-- Name Column -->
  <ng-container matColumnDef="email">
    <th mat-header-cell *matHeaderCellDef> Email </th>
    <td mat-cell *matCellDef="let goal"> {{goal.email}} </td>
  </ng-container>

  <!-- Weight Column -->
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef> Goal Name </th>
    <td mat-cell *matCellDef="let goal"> {{goal.name}} </td>
  </ng-container>

  <!-- Symbol Column -->
  <ng-container matColumnDef="description">
    <th mat-header-cell *matHeaderCellDef> Description </th>
    <td mat-cell *matCellDef="let goal"> {{goal.description}} </td>
  </ng-container>

  <ng-container matColumnDef="start">
    <th mat-header-cell *matHeaderCellDef> Start </th>
    <td mat-cell *matCellDef="let goal"> {{goal.startDate | date}} </td>
  </ng-container>

  <ng-container matColumnDef="target">
    <th mat-header-cell *matHeaderCellDef> Target </th>
    <td mat-cell *matCellDef="let goal"> {{goal.targetDate | date}} </td>
  </ng-container>

  <ng-container matColumnDef="currentSavings">
    <th mat-header-cell *matHeaderCellDef> Current Savings </th>
    <td mat-cell *matCellDef="let goal"> {{goal.currentSavings}} </td>
  </ng-container>

  <ng-container matColumnDef="targetSavings">
    <th mat-header-cell *matHeaderCellDef> Target Savings </th>
    <td mat-cell *matCellDef="let goal"> {{goal.targetSavings}} </td>
  </ng-container>

  <ng-container matColumnDef="priority">
    <th mat-header-cell *matHeaderCellDef> Priority </th>
    <td mat-cell *matCellDef="let goal"> {{goal.priority}} </td>
  </ng-container>

  <ng-container matColumnDef="select">
    <th mat-header-cell *matHeaderCellDef> Action </th>
    <td mat-cell *matCellDef="let goal"><button (click)="setActiveGoal(goal.goalId)">Select</button></td>
  </ng-container>



  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;" [class.example-expanded-row]="expandedGoal === goal"
    (click)="expandedGoal = expandedGoal === goal ? null : goal"></tr>

  <tr mat-row *matRowDef="let row; columns: ['expandedGoal']" class="example-detail-row"></tr>

</table>

<table width=100% *ngIf="currentGoal">
<tr></tr>
<th *ngFor="let column of displayedColumns">{{column}}</th>
<tr>
  <td>{{currentGoal.goalId}}</td>
  <td>{{currentGoal.email}}</td>
  <td>{{currentGoal.name}}</td>
  <td>{{currentGoal.description}}</td>
  <td>{{currentGoal.startDate | date}}</td>
  <td>{{currentGoal.targetDate | date}}</td>
  <td>{{currentGoal.currentSavings}}</td>
  <td>{{currentGoal.targetSavings}}</td>
  <td>{{currentGoal.priority}}</td>
  <td><button routerLink="/goals/{{currentGoal.goalId}}">Edit</button>
  <button (click)="deleteGoal()">Delete</button></td>
</tr>

<div *ngIf = message>{{message}}</div>
</table>